---
title: 01.RN基础知识
date: 2025-06-02
cover: img/graphic/graphic-base.jpg
categories:
  - 前端
tags:
  - react
  - react-native
description: 了解RN的基础知识，如何创建样式，使用原生组件等
---

## 样式布局

RN 的样式只能通过`StyleSheet.create`来创建，样式的属性和 CSS 基本一致，但是有一些区别。
使用样式只能使用`style`属性，不能使用`className`属性。

```jsx
import { StyleSheet, Text, View } from "react-native";

const styles = StyleSheet.create({
  container: {
    // RN的flex样式默认是垂直布局，需要使用flexDirection来设置水平布局
    flexDirection: "row",
    flex: 1,
    backgroundColor: "#fff",
    alignItems: "center",
    justifyContent: "center",
  },
  title: {
    fontSize: 20,
    fontWeight: "bold",
  },
});
```

同一个组件可以使用多个样式，需要传入一个数组，样式之间使用逗号分隔。

```jsx
<Text style={[styles.title, { color: "red" }]}>Hello World</Text>
```

在 RN 中，涉及到尺寸，默认都是不给单位的，表示的是逻辑像素：

```jsx
<View style={{ width: 100, height: 100 }} />
```

在组件样式中，使用 flex 属性可以动态设置组件的尺寸，flex 属性的值是一个数字，表示该组件占父组件的比例。

```jsx
<View style={{ flex: 1 }} />
```

> 设置了 alignItems 或者 justifyContent 属性后，子组件宽度需要设置内容（被内容撑开）或者手动设置宽度。

除了使用 flex 属性来控制组件的尺寸，还可以使用百分比来控制组件的尺寸。

```jsx
<View style={{ width: "50%", height: "50%" }} />
```

## 原生组件

### 1. Text 组件

如果有文本信息，则必须放置在 Text 组件中。否则会报错。

```jsx
<Text>Hello World</Text>
```

### 2. View 组件

View 组件是 RN 中最基本的组件，它可以用来包裹其他组件，也可以用来作为容器使用。

```jsx
<View>
  <Text>Hello World</Text>
</View>
```

### 3. Image 组件

Image 组件用于显示图片，需要传入一个`source`属性，该属性的值是一个对象，包含`uri`属性，该属性的值是图片的路径。

1. 图片可以导入本地图片：

```jsx
import Image from "react-native";
<Image source={require("./img/ok.png")} />;
```

导入本地图片时，require 参数必须是一个静态字符串，不能是一个变量，因为 require 是在编译时执行的，而不是在运行时执行。比如：

```jsx
const icon = "ok";
<Image source={require("./img/" + icon + ".png")} />; // 报错
```

2. 图片可以导入网络图片：

```jsx
<Image source={{ uri: "https://facebook.github.io/react/logo.png" }} />
```

在指定一个网络图片的时候，必须要设置图片的宽高，不然不展示

### 4. TextInput 组件

用于处理文本输入，需要传入一个`value`属性，该属性的值是一个字符串，用于指定文本输入框的初始值。

```jsx
const [inputText, setInputText] = useState("");
<View style={styles.container}>
  <TextInput
    style={{
      height: 40,
      borderColor: "gray",
      borderWidth: 1,
      width: 300,
      marginBottom: 10,
    }}
    onChangeText={setInputText}
    value={inputText}
  ></TextInput>
</View>;
```
### 5. Button 组件

用于处理按钮点击事件，需要传入一个`onPress`属性，该属性的值是一个函数，用于指定按钮点击事件的处理函数。

```jsx
<Button title="Click Me" onPress={onPressHandler} />;
```

Button组件调用的是原生的组件，对于不同的平台，会有不同的展示效果。在Android上是一个矩形按钮，在iOS上是一个文本形状的按钮。  

### 6. Touchable 组件  

如果希望在各个平台上展示效果都一样，那么可以使用Touchable组件，它提供了三个形式的组件: 
- TouchableHighlight: 当按下的时候，封装的视图的不透明度会降低，同时会有一个底层的颜色透过而被用户看到，使得视图变暗或变亮。  
- TouchableOpacity: 当按下的时候，封装的视图的不透明度会降低。  
- TouchableWithoutFeedback: 当按下的时候，封装的视图不会有任何变化。

```jsx
<View style={styles.container}>
  <TouchableHighlight
    activeOpacity={0.6}
    underlayColor="#DDDDDD"
    onPress={() => {
      alert('You tapped the button!');
    }}
  >
    <View style={styles.touchBtn}>Touch</View>
  </TouchableHighlight>
</View>
```
实际显示的可以点击的区域是内部的View组件（或者其他自定义子组件），以此来保证各个平台显示的一致性。

### 7. ScrollView 组件

可滚动的容器，可以在其中放置多个子组件。ScrollView可以水平滚动或者垂直滚动。

```jsx
<ScrollView style={styles.container}>
  <View style={styles.item}>
    <Text>Item 1</Text>
  </View>
  <View style={styles.item}>
    <Text>Item 2</Text>
  </View>
  <View style={styles.item}>
    <Text>Item 3</Text>
  </View>
</ScrollView>;
```

除了可滚动，RN还提供了一些渲染列表的组件：
### 8. FlatList 组件

用于渲染一个列表，列表的元素之间结构是近似的，数据可能不同。

FlatList并不会立即渲染所有元素，而是会优先渲染屏幕上可见的元素，当用户滚动列表时，会动态的渲染新的元素。

与React渲染列表一样，也需要给子元素设置一个key属性，用于标识每个元素的唯一性。

```jsx
<FlatList data={data} renderItem={({ item, index }) => <Text>{item}</Text>} keyExtractor={(item, index) => index} />;
```

### 9. SectionList 组件

用于渲染分组数据，每一个分组可以有一个标题。

```jsx
const sections = [
  { title: 'A', data: ['Apple', 'Apricot', 'Avocado'] },
  { title: 'B', data: ['Banana', 'Blueberry', 'Bilberry'] },
];
<SectionList 
  sections={sections}
  renderItem={({ item, index, section }) => <Text>{item}</Text>} 
  keyExtractor={(item, index) => index} 
  renderSectionHeader={({ section }) => <Text>{section.title}</Text>}
/>;
```

### 10. 获取数据

RN 中获取数据有两种方式：
1. fetchAPI
2. Ajax

> 使用fetchAPI获取数据，必须要是https请求



