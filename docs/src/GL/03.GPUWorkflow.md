---
title: 03.GPU工作流程
date: 2024-05-24
cover: 
categories:
 - GL
tags:
 - OpenGL
 - cpp
 - GPU
description: 详细梳理GPU的工作流程 
---

## 1. 工作流程

<Image imgLink="/img/GPUWorkFlow.png" />

图形渲染的本质，就是CPU端的C++程序控制GPU行为的过程，控制的过程包括数据传输和指令传送

## 2. 了解GPU
显卡最强大的功能，是并行处理能力，GPU中包含了大量的运算核心

### GPU的两大工作
GPU对三角形数据的处理，分为顶点处理与片元处理

#### 顶点处理
包含对顶点进行变换，从三维世界坐标变换到屏幕像素坐标，也可以对顶点进行任意变化

#### 片元处理
将图形离散为像素片元，片元处理需要计算出每个像素片元应该着什么颜色

顶点与片元的处理，统一都是通过着色器程序shader进行的，它是我们自己编写的运行在GPU端的程序。

处理顶点的程序成为顶点着色器（VertexShader），主要处理顶点，进行三维变化，屏幕投影等操作
处理片元的程序称为片元着色器（FragmentShader），主要决定像素的颜色

## NDC（标准化设备坐标）
解决问题: 不同显示器屏幕尺寸和比例不同，物体内容展示区域就会不一样， 所以可以将物体坐标放到一个标准化坐标系中，将x和y放到一个-1到1的范围内，再进行缩放，保证不同比例屏幕中显示的内容保持一致
计算方式： 屏幕坐标 = 屏幕尺寸 / 2 + 屏幕尺寸 /  2 * NDC坐标
比如： NDC坐标（0.3， 0.2） 屏幕尺寸（800 * 600）
屏幕坐标为（400 + 400 * 0.3， 300 + 300 * 0.2）
